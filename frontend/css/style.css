/* ===== CUSTOM PROPERTIES ===== */
:root {
  --bg: #000000;
  --surface: #0A0A0A;
  --surface-2: #111111;
  --surface-3: #1A1A1A;
  --surface-4: #222222;
  --glass: rgba(255,255,255,0.06);
  --glass-border: rgba(255,255,255,0.08);
  --glass-strong: rgba(255,255,255,0.12);
  --text: #FFFFFF;
  --text-2: rgba(255,255,255,0.6);
  --text-3: rgba(255,255,255,0.35);
  --accent: #FF2D55;
  --cyan: #00D4FF;
  --purple: #8B5CF6;
  --green: #34C759;
  --radius: 16px;
  --radius-sm: 10px;
  --nav-h: 68px;
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bot: env(safe-area-inset-bottom, 0px);
  --spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease: cubic-bezier(0.16, 1, 0.3, 1);
  /* Liquid Glass */
  --liquid-bg: rgba(255, 255, 255, 0.06);
  --liquid-border: 1px solid rgba(255, 255, 255, 0.08);
  --liquid-blur: blur(40px) saturate(180%);
  --liquid-glow: inset 0 1px 0 rgba(255,255,255,0.06);
  --liquid-radius: 20px;
}

/* ===== RESET ===== */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{
  height:100%;width:100%;
  font-family:'Inter',-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  background:var(--bg);color:var(--text);
  overflow:hidden;
  -webkit-tap-highlight-color:transparent;
  -webkit-font-smoothing:antialiased;
  user-select:none;
}
button{cursor:pointer;font-family:inherit}
input,textarea{font-family:inherit}
::-webkit-scrollbar{width:0;height:0}

/* ===== SCREENS ===== */
.screen{
  position:fixed;inset:0;
  display:none;flex-direction:column;
  padding-bottom:var(--nav-h);
  overflow-y:auto;overflow-x:hidden;
  -webkit-overflow-scrolling:touch;
  z-index:1;
}
.screen.active{display:flex}

/* ===== BOTTOM NAV ===== */
.bottom-nav{
  position:fixed;bottom:0;left:0;right:0;
  height:var(--nav-h);
  display:flex;align-items:center;justify-content:space-around;
  background:var(--liquid-bg);
  backdrop-filter:var(--liquid-blur);-webkit-backdrop-filter:var(--liquid-blur);
  border-top:var(--liquid-border);
  box-shadow:var(--liquid-glow);
  padding-bottom:var(--safe-bot);
  z-index:100;
  transition:transform 0.35s var(--ease);
}
.nav-item{
  display:flex;flex-direction:column;align-items:center;gap:3px;
  background:none;border:none;color:var(--text-3);
  font-size:10px;font-weight:500;
  padding:6px 14px;position:relative;
  transition:color 0.25s;
}
.nav-item svg{width:24px;height:24px;transition:transform 0.3s var(--spring)}
.nav-item.active{color:var(--accent)}
.nav-item.active svg{transform:scale(1.08);stroke:var(--accent)}
.nav-badge{
  position:absolute;top:0;right:6px;
  min-width:16px;height:16px;border-radius:8px;
  background:var(--accent);color:white;
  font-size:9px;font-weight:700;
  display:flex;align-items:center;justify-content:center;
  padding:0 4px;
}
.nav-create{
  position:relative;width:44px;height:28px;
  border:none;background:none;
  display:flex;align-items:center;justify-content:center;
  padding:0;
}
.create-dot{
  width:36px;height:22px;border-radius:8px;
  background:var(--accent);
  position:relative;
  transition:transform 0.3s var(--spring);
  box-shadow:0 0 16px rgba(255,45,85,0.35);
}
.create-dot::before{
  content:'';position:absolute;
  top:50%;left:50%;transform:translate(-50%,-50%);
  width:14px;height:2px;background:white;border-radius:1px;
}
.create-dot::after{
  content:'';position:absolute;
  top:50%;left:50%;transform:translate(-50%,-50%);
  width:2px;height:14px;background:white;border-radius:1px;
}
.nav-create:active .create-dot{transform:scale(0.88)}

/* ===== HOME FEED ===== */
#screen-home{padding-bottom:0}
.feed-top-bar{
  position:fixed;top:0;left:0;right:0;
  display:flex;align-items:center;justify-content:center;gap:0;
  padding:max(48px, calc(var(--safe-top) + 12px)) 0 12px;
  z-index:20;
  background:var(--liquid-bg);
  backdrop-filter:var(--liquid-blur);-webkit-backdrop-filter:var(--liquid-blur);
  border-bottom:var(--liquid-border);
  box-shadow:var(--liquid-glow);
  pointer-events:none;
}
.feed-tab{
  background:none;border:none;
  color:rgba(255,255,255,0.5);
  font-size:16px;font-weight:600;
  padding:6px 16px;
  pointer-events:all;
  transition:color 0.25s,transform 0.25s;
  position:relative;
}
.feed-tab.active{color:white;font-weight:700}
.feed-tab.active::after{
  content:'';position:absolute;bottom:0;left:50%;transform:translateX(-50%);
  width:28px;height:3px;border-radius:2px;background:white;
}
.feed-tab-divider{width:1px;height:16px;background:rgba(255,255,255,0.2)}
.feed-container{
  position:fixed;inset:0;
  overflow-y:scroll;
  scroll-snap-type:y mandatory;
  -webkit-overflow-scrolling:touch;
}
.video-slide{
  width:100%;height:100vh;height:100dvh;
  scroll-snap-align:start;
  position:relative;background:var(--surface);overflow:hidden;
}
.video-bg{
  position:absolute;inset:0;
  background-size:cover;background-position:center;
  will-change:transform;
}
.video-gradient-bottom{
  position:absolute;bottom:0;left:0;right:0;height:55%;
  background:linear-gradient(transparent,rgba(0,0,0,0.75));
  pointer-events:none;will-change:transform;
}
.video-gradient-top{
  position:absolute;top:0;left:0;right:0;height:25%;
  background:linear-gradient(rgba(0,0,0,0.35),transparent);
  pointer-events:none;
}

/* Video Progress Bar */
.video-progress-bar{
  position:absolute;top:0;left:0;right:0;height:3px;z-index:15;
  background:rgba(255,255,255,0.1);
}
.video-progress-fill{
  height:100%;background:var(--accent);width:0;
  will-change:width;
}
.video-slide.active-video .video-progress-fill{
  animation:videoProgress 8s linear infinite;
}

/* Video info */
.video-info{
  position:absolute;bottom:82px;left:14px;right:76px;z-index:10;
}
.video-user-row{
  display:flex;align-items:center;gap:10px;margin-bottom:8px;
}
.video-avatar{
  width:40px;height:40px;border-radius:50%;
  background:var(--surface-3);border:2px solid white;
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:14px;flex-shrink:0;
  position:relative;
}
.video-avatar .follow-badge{
  position:absolute;bottom:-4px;right:-4px;
  width:18px;height:18px;border-radius:50%;
  background:var(--accent);border:2px solid black;
  display:flex;align-items:center;justify-content:center;
}
.follow-badge svg{width:10px;height:10px;color:white}
.follow-badge.followed{background:var(--green)}
.follow-badge.followed svg{display:none}
.follow-badge.followed::after{content:'âœ“';color:white;font-size:10px;font-weight:700}
.video-username{font-weight:700;font-size:15px;letter-spacing:-0.01em}
.video-desc{
  font-size:13px;line-height:1.45;margin-bottom:8px;
  color:rgba(255,255,255,0.9);
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;
}
.video-music{
  display:flex;align-items:center;gap:8px;
  font-size:12px;color:rgba(255,255,255,0.7);
}
.video-music svg{width:14px;height:14px;flex-shrink:0;fill:currentColor}
.music-scroll{overflow:hidden;white-space:nowrap;max-width:220px}
.music-scroll span{display:inline-block;animation:marquee 10s linear infinite}

/* Right actions */
.video-actions{
  position:absolute;bottom:100px;right:10px;
  display:flex;flex-direction:column;align-items:center;gap:18px;
  z-index:10;
}
.action-btn{
  display:flex;flex-direction:column;align-items:center;gap:4px;
  background:none;border:none;color:white;
  position:relative;
}
.action-btn svg{
  width:30px;height:30px;
  filter:drop-shadow(0 2px 6px rgba(0,0,0,0.4));
  transition:transform 0.3s var(--spring);
}
.action-btn .action-count{font-size:11px;font-weight:600}
.action-btn.liked svg{color:var(--accent);fill:var(--accent)}
.action-btn.saved svg{color:#FFD60A;fill:#FFD60A}
.action-btn:active svg{transform:scale(1.3)}
.music-disc{
  width:40px;height:40px;border-radius:50%;
  background:var(--surface-3);
  border:3px solid var(--surface-4);
  display:flex;align-items:center;justify-content:center;
  font-size:11px;font-weight:700;
  animation:spin 4s linear infinite;
  position:relative;
  overflow:hidden;
}
.music-disc::before{
  content:'';position:absolute;
  width:12px;height:12px;border-radius:50%;
  background:var(--bg);z-index:1;
}
.music-disc::after{
  content:'';position:absolute;inset:4px;
  border-radius:50%;
  border:1px solid rgba(255,255,255,0.1);
}

/* Like particles */
.like-particle{
  position:absolute;
  width:12px;height:12px;
  pointer-events:none;
  color:var(--accent);
  z-index:20;
  animation:particleBurst 0.6s ease-out forwards;
}
.like-particle svg{width:100%;height:100%;fill:currentColor}

/* Double tap heart */
.double-tap-heart{
  position:fixed;top:50%;left:50%;
  transform:translate(-50%,-50%) scale(0);
  z-index:50;pointer-events:none;color:var(--accent);
}
.double-tap-heart svg{width:100px;height:100px;filter:drop-shadow(0 0 30px var(--accent))}
.double-tap-heart.show{animation:heartPop 0.8s var(--spring) forwards}

/* ===== DISCOVER ===== */
.discover-header{
  padding:max(52px,calc(var(--safe-top)+12px)) 16px 0;
  background:var(--bg);position:sticky;top:0;z-index:10;
}
.screen-title{
  font-size:32px;font-weight:800;margin-bottom:16px;
  color:var(--text);letter-spacing:-0.02em;
}
.search-bar{
  display:flex;align-items:center;gap:10px;
  background:var(--liquid-bg);
  backdrop-filter:var(--liquid-blur);-webkit-backdrop-filter:var(--liquid-blur);
  border:var(--liquid-border);
  border-radius:var(--liquid-radius);
  box-shadow:var(--liquid-glow);
  padding:12px 16px;
  margin-bottom:14px;
}
.search-bar input{
  flex:1;background:none;border:none;outline:none;
  color:var(--text);font-size:15px;
}
.search-bar input::placeholder{color:var(--text-3)}
.search-icon{width:18px;height:18px;color:var(--text-2);flex-shrink:0}
.trending-tags{
  display:flex;gap:8px;overflow-x:auto;
  padding-bottom:14px;scrollbar-width:none;
}
.trending-tags::-webkit-scrollbar{display:none}
.tag{
  flex-shrink:0;padding:8px 16px;border-radius:20px;
  font-size:13px;font-weight:600;cursor:pointer;
  background:var(--surface-2);
  color:var(--text-2);transition:all 0.25s;
  white-space:nowrap;border:none;
}
.tag.active,.tag:active{background:var(--accent);color:white}
.discover-grid{
  display:grid;grid-template-columns:repeat(3,1fr);gap:1px;
  padding:0;padding-bottom:calc(var(--nav-h)+16px);
}
.discover-item{
  aspect-ratio:9/12;overflow:hidden;
  position:relative;cursor:pointer;
}
.discover-item .thumb{
  width:100%;height:100%;background-size:cover;background-position:center;
  transition:transform 0.3s ease;
}
.discover-item:active .thumb{transform:scale(1.03)}
.discover-item .thumb-overlay{
  position:absolute;bottom:0;left:0;right:0;
  padding:8px;background:linear-gradient(transparent,rgba(0,0,0,0.7));
}
.discover-item .thumb-views{
  font-size:11px;font-weight:600;display:flex;align-items:center;gap:4px;
}
.discover-item .thumb-views svg{width:12px;height:12px;fill:currentColor}
.discover-item:first-child{grid-column:span 3;aspect-ratio:16/9}

/* ===== CREATE / CAMERA ===== */
#screen-create{padding-bottom:0}
.camera-view{
  position:relative;width:100%;height:100vh;height:100dvh;
  background:#000;
  display:flex;flex-direction:column;
}
.camera-top-bar{
  position:absolute;top:0;left:0;right:0;
  display:flex;align-items:center;justify-content:space-between;
  padding:max(48px,calc(var(--safe-top)+8px)) 16px 12px;
  z-index:10;
}
.camera-top-right{display:flex;gap:12px}
.camera-btn{
  width:40px;height:40px;border-radius:50%;
  background:rgba(255,255,255,0.08);border:none;
  display:flex;align-items:center;justify-content:center;
  backdrop-filter:blur(10px);
}
.camera-btn svg{width:22px;height:22px;color:white}
.camera-right-tools{
  position:absolute;right:14px;top:50%;transform:translateY(-60%);
  display:flex;flex-direction:column;gap:22px;z-index:10;
}
.camera-tool-btn{
  display:flex;flex-direction:column;align-items:center;gap:5px;
  background:none;border:none;color:white;
}
.camera-tool-btn svg{width:26px;height:26px}
.camera-tool-btn span{font-size:10px;font-weight:500;color:var(--text-2)}
.camera-bottom{
  position:absolute;bottom:0;left:0;right:0;
  padding:0 24px max(32px,calc(var(--safe-bot)+12px));
  z-index:10;display:flex;flex-direction:column;align-items:center;gap:18px;
}
.camera-mode-tabs{display:flex;gap:20px}
.cam-mode{
  font-size:13px;font-weight:600;color:var(--text-3);
  cursor:pointer;transition:color 0.25s;
  background:none;border:none;
}
.cam-mode.active{color:white}
.camera-bottom-row{
  display:flex;align-items:center;justify-content:center;gap:36px;
}
.upload-btn{
  width:42px;height:42px;border-radius:10px;
  background:var(--surface-2);border:1px solid var(--glass-border);
  display:flex;align-items:center;justify-content:center;cursor:pointer;
}
.upload-btn svg{width:20px;height:20px;color:white}
.record-btn{
  width:72px;height:72px;border-radius:50%;
  background:none;border:none;cursor:pointer;
  position:relative;display:flex;align-items:center;justify-content:center;
}
.record-btn-outer{
  width:60px;height:60px;border-radius:50%;
  border:3px solid rgba(255,255,255,0.25);
  display:flex;align-items:center;justify-content:center;
  transition:all 0.3s var(--spring);
}
.record-btn-inner{
  width:44px;height:44px;border-radius:50%;
  background:var(--accent);
  transition:all 0.3s var(--spring);
  box-shadow:0 0 20px rgba(255,45,85,0.4);
}
.record-btn.recording .record-btn-inner{
  width:24px;height:24px;border-radius:6px;
}
.record-ring{position:absolute;inset:0;transform:rotate(-90deg)}
.record-progress{transition:stroke-dashoffset 0.1s linear}
.camera-types{display:flex;gap:24px}
.cam-type{
  font-size:13px;font-weight:600;color:var(--text-3);
  cursor:pointer;transition:color 0.25s;
  background:none;border:none;position:relative;
}
.cam-type.active{color:white}
.cam-type.active::after{
  content:'';position:absolute;bottom:-4px;left:50%;transform:translateX(-50%);
  width:4px;height:4px;border-radius:50%;background:white;
}

/* ===== MESSAGES ===== */
.messages-header{
  padding:max(52px,calc(var(--safe-top)+12px)) 16px 0;
  background:var(--bg);position:sticky;top:0;z-index:10;
}
.messages-top-row{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:16px;
}
.messages-tabs{
  display:flex;gap:0;margin-bottom:16px;
  border-bottom:1px solid var(--glass-border);
}
.messages-tab{
  flex:1;padding:10px;text-align:center;
  background:none;border:none;color:var(--text-3);
  font-size:14px;font-weight:600;position:relative;
  transition:color 0.25s;cursor:pointer;
}
.messages-tab.active{color:var(--text)}
.messages-tab.active::after{
  content:'';position:absolute;bottom:-1px;left:20%;right:20%;
  height:2px;background:var(--text);border-radius:2px;
}
.messages-tab .tab-badge{
  display:inline-block;min-width:16px;height:16px;border-radius:8px;
  background:var(--accent);color:white;font-size:9px;font-weight:700;
  line-height:16px;text-align:center;margin-left:4px;padding:0 4px;
}
.screen-title-plain{
  font-size:22px;font-weight:700;
  display:flex;align-items:center;gap:6px;
}
.screen-title-plain svg{opacity:0.5}
.icon-btn{
  width:40px;height:40px;border-radius:50%;
  background:none;border:none;color:white;
  display:flex;align-items:center;justify-content:center;
}
.icon-btn svg{width:22px;height:22px}
/* Stories row */
.stories-row{
  display:flex;gap:14px;overflow-x:auto;
  padding-bottom:16px;scrollbar-width:none;
}
.stories-row::-webkit-scrollbar{display:none}
.story-item{
  display:flex;flex-direction:column;align-items:center;gap:6px;
  flex-shrink:0;cursor:pointer;
}
.story-ring{
  width:56px;height:56px;border-radius:50%;
  padding:2px;position:relative;
}
.story-ring.has-story{
  background:linear-gradient(135deg, var(--accent), var(--purple), var(--cyan));
}
.story-ring:not(.has-story){background:var(--surface-3)}
.story-avatar{
  width:100%;height:100%;border-radius:50%;
  background:var(--surface-2);border:2px solid var(--bg);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:18px;
}
.story-name{font-size:11px;color:var(--text-2);max-width:60px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
/* Chat list */
.chat-list{padding:0;padding-bottom:calc(var(--nav-h)+16px)}
.chat-item{
  display:flex;align-items:center;gap:12px;
  padding:12px 16px;cursor:pointer;
  transition:background 0.15s;
  position:relative;overflow:hidden;
}
.chat-item:active{background:var(--glass)}
.chat-item-content{
  display:flex;align-items:center;gap:12px;flex:1;
  transition:transform 0.3s var(--ease);
  position:relative;z-index:1;
}
.chat-swipe-actions{
  position:absolute;right:0;top:0;bottom:0;
  display:flex;align-items:stretch;
  transform:translateX(100%);
}
.chat-swipe-btn{
  width:72px;display:flex;flex-direction:column;
  align-items:center;justify-content:center;gap:4px;
  border:none;color:white;font-size:10px;font-weight:600;
}
.chat-swipe-btn.archive-btn{background:#5856D6}
.chat-swipe-btn.delete-btn{background:var(--accent)}
.chat-swipe-btn svg{width:20px;height:20px}
.chat-avatar{
  width:50px;height:50px;border-radius:50%;
  background:var(--surface-3);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:18px;flex-shrink:0;
}
.chat-content{flex:1;min-width:0}
.chat-name{font-size:15px;font-weight:600}
.chat-preview{
  font-size:13px;color:var(--text-3);
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  margin-top:2px;
}
.chat-meta{display:flex;flex-direction:column;align-items:flex-end;gap:4px;flex-shrink:0}
.chat-time{font-size:12px;color:var(--text-3)}
.chat-unread{
  width:18px;height:18px;border-radius:50%;
  background:var(--accent);color:white;
  font-size:10px;font-weight:700;
  display:flex;align-items:center;justify-content:center;
}

/* Chat overlay */
.chat-overlay{
  position:fixed;inset:0;background:var(--bg);
  z-index:200;display:none;flex-direction:column;
}
.chat-overlay.open{display:flex}
.chat-overlay-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:max(48px,calc(var(--safe-top)+8px)) 8px 12px;
  border-bottom:1px solid var(--glass-border);
}
.chat-overlay-user{display:flex;align-items:center;gap:10px}
.chat-overlay-avatar{
  width:36px;height:36px;border-radius:50%;
  background:var(--surface-3);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:14px;
}
.chat-overlay-name{font-size:16px;font-weight:600}
.chat-messages{
  flex:1;overflow-y:auto;padding:16px;
  display:flex;flex-direction:column;gap:8px;
}
.chat-bubble{
  max-width:75%;padding:10px 14px;
  font-size:14px;line-height:1.4;
  border-radius:18px;word-break:break-word;
}
.chat-bubble.sent{
  align-self:flex-end;
  background:var(--accent);color:white;
  border-bottom-right-radius:4px;
  box-shadow:0 2px 12px rgba(255,45,85,0.2);
}
.chat-bubble.received{
  align-self:flex-start;
  background:var(--liquid-bg);
  backdrop-filter:var(--liquid-blur);-webkit-backdrop-filter:var(--liquid-blur);
  border:var(--liquid-border);
  box-shadow:var(--liquid-glow);
  color:var(--text-2);
  border-bottom-left-radius:4px;
}
.chat-bubble-time{font-size:10px;color:var(--text-3);margin-top:4px}
.chat-bubble-time.sent-time{text-align:right}
.chat-input-bar{
  display:flex;align-items:center;gap:8px;
  padding:10px 12px max(12px,var(--safe-bot));
  border-top:1px solid var(--glass-border);
}
.chat-emoji-btn{
  width:36px;height:36px;border-radius:50%;
  background:none;border:none;color:var(--text-2);
  display:flex;align-items:center;justify-content:center;
}
.chat-emoji-btn svg{width:24px;height:24px}
.chat-input{
  flex:1;background:var(--surface-2);border:none;outline:none;
  color:white;font-size:14px;padding:10px 14px;
  border-radius:20px;
}
.chat-input::placeholder{color:var(--text-3)}
.chat-send-btn{
  width:36px;height:36px;border-radius:50%;
  background:var(--accent);border:none;
  display:flex;align-items:center;justify-content:center;
  color:white;transition:transform 0.2s var(--spring);
}
.chat-send-btn svg{width:16px;height:16px}
.chat-send-btn:active{transform:scale(0.88)}

/* ===== NOTIFICATIONS ===== */
.notifications-container{padding:0 0 calc(var(--nav-h)+16px);display:none}
.notifications-container.active{display:block}
.chat-list-container{display:block}
.chat-list-container.hidden{display:none}
.notification-item{
  display:flex;align-items:center;gap:12px;
  padding:14px 16px;cursor:pointer;
  transition:background 0.15s;
}
.notification-item:active{background:var(--glass)}
.notification-item.unread{background:rgba(255,45,85,0.04)}
.notification-avatar{
  width:44px;height:44px;border-radius:50%;
  background:var(--surface-3);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:16px;flex-shrink:0;
  position:relative;
}
.notification-type-icon{
  position:absolute;bottom:-2px;right:-2px;
  width:18px;height:18px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  border:2px solid var(--bg);
}
.notification-type-icon.like{background:var(--accent)}
.notification-type-icon.comment{background:var(--cyan)}
.notification-type-icon.follow{background:var(--purple)}
.notification-type-icon.mention{background:var(--green)}
.notification-type-icon svg{width:10px;height:10px;color:white;fill:white}
.notification-content{flex:1;min-width:0}
.notification-text{font-size:13px;line-height:1.4;color:var(--text-2)}
.notification-text strong{color:var(--text);font-weight:600}
.notification-time{font-size:11px;color:var(--text-3);margin-top:2px}
.notification-thumb{
  width:40px;height:40px;border-radius:6px;
  background:var(--surface-3);flex-shrink:0;
}
.notification-section-title{
  font-size:12px;font-weight:700;color:var(--text-3);
  text-transform:uppercase;letter-spacing:0.05em;
  padding:16px 16px 8px;
}

/* ===== PROFILE ===== */
.profile-header{
  padding:max(48px,calc(var(--safe-top)+8px)) 16px 0;
  background:var(--bg);
}
.profile-top-bar{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:20px;
}
.profile-handle{font-size:18px;font-weight:800;letter-spacing:-0.02em}
.profile-avatar-section{
  display:flex;flex-direction:column;align-items:center;margin-bottom:20px;
}
.profile-avatar-wrap{
  width:96px;height:96px;position:relative;margin-bottom:14px;
}
.profile-avatar-glow{
  position:absolute;inset:-8px;border-radius:50%;
  background:radial-gradient(circle,rgba(0,212,255,0.25) 0%,transparent 70%);
  animation:pulseGlow 3s ease-in-out infinite;
}
.profile-avatar-ring{
  position:absolute;inset:-3px;border-radius:50%;
  background:linear-gradient(135deg, var(--cyan), var(--purple));
  padding:3px;
  -webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  -webkit-mask-composite:xor;mask-composite:exclude;
  animation:ringRotate 4s linear infinite;
}
.profile-avatar-img{
  width:100%;height:100%;border-radius:50%;
  background:linear-gradient(135deg,#1a1a2e,#16213e);
  display:flex;align-items:center;justify-content:center;
  font-size:36px;font-weight:800;
  position:relative;z-index:1;
}
.profile-live-badge{
  position:absolute;top:0;left:-4px;z-index:5;
  background:var(--green);color:white;
  font-size:10px;font-weight:700;text-transform:uppercase;
  padding:2px 8px;border-radius:4px;
  border:2px solid var(--bg);
  letter-spacing:0.03em;
}
.profile-add-btn{
  position:absolute;bottom:0;right:-6px;z-index:5;
  width:28px;height:28px;border-radius:50%;
  background:var(--accent);border:2px solid var(--bg);
  display:flex;align-items:center;justify-content:center;
  color:white;
}
.profile-add-btn svg{width:14px;height:14px}
.profile-display-name{font-size:22px;font-weight:800;letter-spacing:-0.02em}
.profile-bio{
  font-size:13px;color:var(--text-2);text-align:center;
  margin-top:4px;line-height:1.4;max-width:280px;
}
.profile-stats{
  display:flex;justify-content:center;align-items:center;gap:0;
  margin-bottom:16px;padding:14px 8px;
  background:var(--liquid-bg);
  backdrop-filter:var(--liquid-blur);-webkit-backdrop-filter:var(--liquid-blur);
  border:var(--liquid-border);
  box-shadow:var(--liquid-glow);
  border-radius:var(--liquid-radius);
}
.stat{display:flex;flex-direction:column;align-items:center;flex:1}
.stat-num{font-size:18px;font-weight:800;letter-spacing:-0.02em}
.stat-label{font-size:11px;color:var(--text-3);margin-top:2px}
.stat-divider{width:1px;height:28px;background:var(--glass-border)}
.profile-actions{
  display:flex;gap:6px;justify-content:center;margin-bottom:20px;
}
.btn-edit-profile{
  flex:1;max-width:160px;padding:10px;border-radius:10px;
  background:var(--surface-2);border:1px solid var(--glass-border);
  color:white;font-size:14px;font-weight:600;
  font-family:inherit;
  transition:transform 0.2s var(--spring);
}
.btn-edit-profile:active{transform:scale(0.96)}
.btn-message{
  flex:1;max-width:160px;padding:10px;border-radius:10px;
  background:var(--accent);border:none;
  color:white;font-size:14px;font-weight:600;
  font-family:inherit;
  transition:transform 0.2s var(--spring);
}
.btn-message:active{transform:scale(0.96)}
.btn-instagram,.btn-dropdown{
  width:42px;height:42px;border-radius:10px;
  background:var(--surface-2);border:1px solid var(--glass-border);
  display:flex;align-items:center;justify-content:center;
  color:white;
}
.btn-instagram svg,.btn-dropdown svg{width:18px;height:18px}
.profile-content-tabs{
  display:flex;border-bottom:1px solid var(--glass-border);
}
.profile-tab{
  flex:1;padding:12px;display:flex;justify-content:center;
  background:none;border:none;color:var(--text-3);
  cursor:pointer;position:relative;transition:color 0.25s;
}
.profile-tab svg{width:22px;height:22px}
.profile-tab.active{color:white}
.profile-tab.active::after{
  content:'';position:absolute;bottom:-1px;left:20%;right:20%;
  height:2px;background:white;border-radius:2px;
}
.profile-grid{
  display:grid;grid-template-columns:repeat(3,1fr);gap:1px;
  padding:0;padding-bottom:calc(var(--nav-h)+16px);
}
.profile-grid-item{
  aspect-ratio:9/12;position:relative;
  background-size:cover;background-position:center;
  background-color:var(--surface-2);cursor:pointer;
  overflow:hidden;
}
.profile-grid-item:active{opacity:0.85}
.profile-grid-item .views-overlay{
  position:absolute;bottom:8px;left:8px;
  font-size:12px;font-weight:600;
  display:flex;align-items:center;gap:4px;
}
.profile-grid-item .views-overlay svg{width:12px;height:12px;fill:currentColor}

/* ===== BOTTOM SHEET (shared) ===== */
.bottom-sheet-overlay{
  position:fixed;inset:0;z-index:250;
  background:rgba(0,0,0,0.5);
  backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);
  display:none;
  animation:backdropIn 0.3s ease-out;
}
.bottom-sheet-overlay.open{display:flex;align-items:flex-end}
.bottom-sheet{
  width:100%;max-height:85vh;
  background:var(--liquid-bg);
  backdrop-filter:var(--liquid-blur);-webkit-backdrop-filter:var(--liquid-blur);
  border:var(--liquid-border);
  border-bottom:none;
  box-shadow:var(--liquid-glow), 0 -8px 40px rgba(0,0,0,0.4);
  border-radius:var(--liquid-radius) var(--liquid-radius) 0 0;
  overflow:hidden;
  animation:sheetSlideUp 0.4s cubic-bezier(0.34,1.56,0.64,1);
  display:flex;flex-direction:column;
}
.bottom-sheet-handle{
  width:36px;height:4px;border-radius:2px;
  background:var(--surface-4);
  margin:10px auto 0;flex-shrink:0;
}
.bottom-sheet-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 16px 10px;flex-shrink:0;
}
.bottom-sheet-header h3{font-size:16px;font-weight:700}
.bottom-sheet-close{
  width:28px;height:28px;border-radius:50%;
  background:var(--surface-3);border:none;
  display:flex;align-items:center;justify-content:center;color:var(--text-2);
}
.bottom-sheet-close svg{width:16px;height:16px}

/* ===== COMMENTS SHEET ===== */
.comments-list{
  flex:1;overflow-y:auto;padding:0 16px;
  display:flex;flex-direction:column;gap:16px;
}
.comment-item{display:flex;gap:10px;align-items:flex-start}
.comment-avatar{
  width:36px;height:36px;border-radius:50%;
  background:var(--surface-3);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:13px;flex-shrink:0;
}
.comment-body{flex:1;min-width:0}
.comment-user{font-size:13px;font-weight:700}
.comment-text{font-size:13px;color:var(--text-2);line-height:1.4;margin-top:2px}
.comment-meta{
  display:flex;align-items:center;gap:14px;
  margin-top:6px;font-size:11px;color:var(--text-3);
}
.comment-meta button{
  background:none;border:none;color:var(--text-3);
  font-size:11px;font-weight:600;cursor:pointer;
}
.comment-like{
  display:flex;flex-direction:column;align-items:center;gap:2px;
  flex-shrink:0;margin-left:auto;
}
.comment-like button{
  background:none;border:none;color:var(--text-3);cursor:pointer;
}
.comment-like button svg{width:16px;height:16px}
.comment-like button.liked{color:var(--accent)}
.comment-like button.liked svg{fill:var(--accent)}
.comment-like span{font-size:10px;color:var(--text-3)}
.comment-input-bar{
  display:flex;align-items:center;gap:10px;
  padding:12px 16px max(12px,var(--safe-bot));
  border-top:1px solid var(--glass-border);flex-shrink:0;
}
.comment-input-avatar{
  width:32px;height:32px;border-radius:50%;
  background:var(--surface-3);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:12px;flex-shrink:0;
}
.comment-input{
  flex:1;background:var(--surface-2);border:none;outline:none;
  color:white;font-size:13px;padding:10px 14px;
  border-radius:20px;
}
.comment-input::placeholder{color:var(--text-3)}
.comment-post-btn{
  background:none;border:none;
  color:var(--accent);font-size:14px;font-weight:700;
  cursor:pointer;opacity:0.5;transition:opacity 0.2s;
}
.comment-post-btn.active{opacity:1}

/* ===== SHARE SHEET ===== */
.share-grid{
  display:grid;grid-template-columns:repeat(4,1fr);gap:16px;
  padding:0 16px 20px;
}
.share-item{
  display:flex;flex-direction:column;align-items:center;gap:8px;
  cursor:pointer;
}
.share-icon{
  width:56px;height:56px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:22px;
}
.share-label{font-size:11px;color:var(--text-2);text-align:center}
.share-actions{
  display:flex;gap:8px;padding:0 16px 20px;
}
.share-action-btn{
  flex:1;padding:12px;border-radius:12px;
  background:var(--surface-2);border:1px solid var(--glass-border);
  color:white;font-size:13px;font-weight:600;
  display:flex;align-items:center;justify-content:center;gap:8px;
  cursor:pointer;
}
.share-action-btn svg{width:18px;height:18px}

/* ===== EDIT PROFILE OVERLAY ===== */
.edit-profile-overlay{
  position:fixed;inset:0;z-index:300;
  background:var(--bg);
  display:none;flex-direction:column;
}
.edit-profile-overlay.open{display:flex}
.edit-profile-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:max(48px,calc(var(--safe-top)+8px)) 16px 12px;
  border-bottom:1px solid var(--glass-border);
}
.edit-profile-header h2{font-size:17px;font-weight:700}
.edit-save-btn{
  background:none;border:none;color:var(--accent);
  font-size:15px;font-weight:700;cursor:pointer;
}
.edit-cancel-btn{
  background:none;border:none;color:var(--text-2);
  font-size:15px;font-weight:500;cursor:pointer;
}
.edit-profile-content{
  flex:1;overflow-y:auto;padding:20px 16px;
}
.edit-avatar-section{
  display:flex;flex-direction:column;align-items:center;margin-bottom:24px;
}
.edit-avatar{
  width:80px;height:80px;border-radius:50%;
  background:linear-gradient(135deg,#1a1a2e,#16213e);
  display:flex;align-items:center;justify-content:center;
  font-size:32px;font-weight:800;margin-bottom:10px;
}
.edit-avatar-btn{
  background:none;border:none;color:var(--accent);
  font-size:14px;font-weight:600;cursor:pointer;
}
.edit-field{margin-bottom:20px}
.edit-field label{
  display:block;font-size:12px;font-weight:600;
  color:var(--text-3);margin-bottom:6px;
  text-transform:uppercase;letter-spacing:0.05em;
}
.edit-field input,.edit-field textarea{
  width:100%;background:var(--surface-2);
  border:1px solid var(--glass-border);
  border-radius:10px;padding:12px 14px;
  color:white;font-size:15px;outline:none;
  transition:border-color 0.2s;
}
.edit-field input:focus,.edit-field textarea:focus{
  border-color:var(--accent);
}
.edit-field textarea{resize:none;min-height:80px;font-family:inherit}

/* ===== STORY VIEWER ===== */
.story-viewer{
  position:fixed;inset:0;z-index:400;
  background:var(--bg);display:none;
  flex-direction:column;
}
.story-viewer.open{display:flex}
.story-viewer-progress{
  display:flex;gap:3px;
  padding:max(48px,calc(var(--safe-top)+8px)) 8px 0;
  position:absolute;top:0;left:0;right:0;z-index:10;
}
.story-progress-seg{
  flex:1;height:2px;border-radius:1px;
  background:rgba(255,255,255,0.3);
  overflow:hidden;
}
.story-progress-seg .fill{
  height:100%;background:white;width:0;
  border-radius:1px;
}
.story-progress-seg.done .fill{width:100%}
.story-progress-seg.active .fill{
  animation:storyProgress 5s linear forwards;
}
.story-viewer-header{
  display:flex;align-items:center;gap:10px;
  padding:max(56px,calc(var(--safe-top)+16px)) 12px 12px;
  position:absolute;top:0;left:0;right:0;z-index:10;
}
.story-viewer-avatar{
  width:36px;height:36px;border-radius:50%;
  background:var(--surface-3);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:14px;
}
.story-viewer-name{font-size:14px;font-weight:600;flex:1}
.story-viewer-time{font-size:12px;color:var(--text-3)}
.story-viewer-close{
  width:36px;height:36px;border-radius:50%;
  background:none;border:none;color:white;
  display:flex;align-items:center;justify-content:center;
}
.story-viewer-close svg{width:24px;height:24px}
.story-viewer-content{
  flex:1;display:flex;align-items:center;justify-content:center;
  font-size:24px;font-weight:700;text-align:center;
  padding:20px;
  background-size:cover;background-position:center;
}

/* ===== SETTINGS OVERLAY ===== */
.settings-overlay{
  position:fixed;inset:0;z-index:300;
  display:none;
  background:rgba(0,0,0,0.6);
  backdrop-filter:blur(8px);
}
.settings-overlay.open{display:flex}
.settings-panel{
  position:absolute;bottom:0;left:0;right:0;
  max-height:85vh;
  background:var(--liquid-bg);
  backdrop-filter:var(--liquid-blur);-webkit-backdrop-filter:var(--liquid-blur);
  border:var(--liquid-border);border-bottom:none;
  box-shadow:var(--liquid-glow), 0 -8px 40px rgba(0,0,0,0.4);
  border-radius:var(--liquid-radius) var(--liquid-radius) 0 0;
  overflow-y:auto;
  animation:slideUpPanel 0.35s var(--ease);
}
.settings-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:16px;
  border-bottom:1px solid var(--glass-border);
  position:sticky;top:0;background:var(--surface);z-index:1;
}
.settings-header h2{font-size:18px;font-weight:700}
.settings-content{padding:16px}
.settings-section{margin-bottom:20px}
.settings-section h3{
  font-size:13px;font-weight:600;color:var(--text-3);
  text-transform:uppercase;letter-spacing:0.05em;
  margin-bottom:10px;padding-left:4px;
}
.settings-card{
  background:var(--liquid-bg);
  backdrop-filter:var(--liquid-blur);-webkit-backdrop-filter:var(--liquid-blur);
  border:var(--liquid-border);
  box-shadow:var(--liquid-glow);
  border-radius:var(--liquid-radius);
  overflow:hidden;
}
.settings-item{
  display:flex;align-items:center;gap:12px;
  padding:14px 16px;
  border-bottom:1px solid var(--glass-border);
  cursor:pointer;transition:background 0.15s;
}
.settings-item:active{background:var(--glass)}
.settings-item:last-child{border-bottom:none}
.settings-icon{
  width:32px;height:32px;border-radius:8px;
  background:var(--surface-3);
  display:flex;align-items:center;justify-content:center;
}
.settings-icon svg{width:18px;height:18px;color:var(--text-2)}
.settings-item>span{flex:1;font-size:15px;font-weight:500}
.settings-value{font-size:13px;color:var(--text-3);margin-right:4px}
.settings-chevron{width:16px;height:16px;color:var(--text-3)}
.toggle{
  width:44px;height:26px;border-radius:13px;
  background:var(--surface-3);position:relative;
  cursor:pointer;transition:background 0.25s;
}
.toggle.active{background:var(--accent)}
.toggle-knob{
  width:22px;height:22px;border-radius:50%;
  background:white;position:absolute;top:2px;left:2px;
  transition:transform 0.25s var(--spring);
  box-shadow:0 1px 4px rgba(0,0,0,0.3);
}
.toggle.active .toggle-knob{transform:translateX(18px)}

/* Settings Sub-Screen */
.settings-sub-screen{
  position:fixed;inset:0;z-index:310;
  background:var(--bg);display:none;flex-direction:column;
}
.settings-sub-screen.open{display:flex}
.settings-sub-header{
  display:flex;align-items:center;gap:12px;
  padding:max(48px,calc(var(--safe-top)+8px)) 16px 12px;
  border-bottom:1px solid var(--glass-border);
}
.settings-sub-header h2{font-size:17px;font-weight:700;flex:1}
.settings-sub-content{
  flex:1;overflow-y:auto;padding:16px;
}

/* ===== PULL TO REFRESH ===== */
.pull-to-refresh{
  position:fixed;top:0;left:50%;transform:translateX(-50%) translateY(-50px);
  width:36px;height:36px;border-radius:50%;
  background:var(--surface-2);
  display:flex;align-items:center;justify-content:center;
  z-index:25;transition:transform 0.3s var(--ease);
  opacity:0;
}
.pull-to-refresh.visible{opacity:1;transform:translateX(-50%) translateY(60px)}
.pull-to-refresh.refreshing svg{animation:pullSpin 0.8s linear infinite}
.pull-to-refresh svg{width:20px;height:20px;color:var(--text-2)}
